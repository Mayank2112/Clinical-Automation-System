<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CAS | Appointment Request</title>
  <link href="../header.css" rel="stylesheet" type="text/css" />
  <link href="../sidenav.css" rel="stylesheet" type="text/css" />
</head>

<header>
  <div class='main'>
    <%- include('../../partials/patient/header') %>
  </div>
</header>

<script>
  const setDoctorId = id => {
    document.getElementById('doctorId').value = id;
  };
</script>

<body>
  <%- include('../../partials/patient/sidenav') -%>

  <div class='main'>
    <h1>Clinical Automation System</h1>
    <br>
    <h2>Request for today's Appointment</h2>
    <br>
    <%= message %>
    <% if(!message && details.length) { %>
      <form action="/patient/appointmentRequest" method="post">
        Enter Doctor Id : <input type="text" name="doctorId" required="required" id="doctorId"
        placeholder="Select from below table" readonly><br>
        Subject : <input type="text" name="subject" required="required"><br>
        Description : <input type="text" name="description"><br>
        Time : <input type="text" name="time"><br>
        <button type="submit">Send Request</button><br>
      </form>
    <h2>Doctors List</h2>
    <table border="1px">
      <th>Name</th>
      <th>Gender</th>
      <th>Start Time</th>
      <th>End Time</th>
      <th>Specialization</th>
      <th>Experience from</th>
      <th>Appointment Fee</th>
      <th>Mobile Number</th>
      <th>Select</th>
      <% details.forEach(doctor => { %>
      <tr>
        <td><%= doctor.name %></td>
        <td><%= doctor.gender %></td>
        <td><%= doctor.startTime %></td>
        <td><%= doctor.endTime %></td>
        <td><%= doctor.specialization.name %></td>
        <td><%= doctor.experienceFrom %></td>
        <td><%= doctor.appointmentFee %></td>
        <td><%= doctor.mobileNumber %></td>
        <td><button onclick="setDoctorId(`<%= doctor.id %>`)">Click</button></td>
      </tr>
      <% }) %>
      <% } %>
  </div>
</body>

</html>
